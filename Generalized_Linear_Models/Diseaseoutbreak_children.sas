data Disease;
input  ID AGE SES SECT Y SAVINGS;
cards;
	  1     33      1      1      0      1
      2     35      1      1      0      1
      3      6      1      1      0      0
      4     60      1      1      0      1
      5     18      3      1      1      0
      6     26      3      1      0      0
      7      6      3      1      0      0
      8     31      2      1      1      1
      9     26      2      1      1      0
     10     37      2      1      0      0
     11     23      1      1      0      0
     12     23      1      1      0      0
     13     27      1      1      0      1
     14      9      1      1      1      1
     15     37      1      2      1      1
     16     22      1      2      1      1
     17     67      1      2      1      1
     18      8      1      2      0      1
     19      6      1      2      1      1
     20     15      1      2      1      1
     21     21      2      2      1      1
     22     32      2      2      1      1
     23     16      1      2      1      1
     24     11      2      2      0      0
     25     14      3      2      0      0
     26      9      2      2      0      0
     27     18      2      2      0      0
     28      2      3      1      0      0
     29     61      3      1      0      1
     30     20      3      1      0      0
     31     16      3      1      0      0
     32      9      2      1      0      0
     33     35      2      1      0      1
     34      4      1      1      0      1
     35     44      3      2      0      0
     36     11      3      2      1      0
     37      3      2      2      0      1
     38      6      3      2      0      0
     39     17      2      2      1      0
     40      1      3      2      0      1
     41     53      2      2      1      1
     42     13      1      2      1      0
     43     24      1      2      0      0
     44     70      1      2      1      1
     45     16      3      2      1      1
     46     12      2      2      0      1
     47     20      3      2      1      1
     48     65      3      2      0      1
     49     40      2      2      1      0
     50     38      2      2      1      1
     51     68      2      2      1      1
     52     74      1      2      1      1
     53     14      1      2      1      1
     54     27      1      2      1      1
     55     31      1      2      0      1
     56     18      1      2      0      1
     57     39      1      2      0      0
     58     50      1      2      0      1
     59     31      1      2      0      1
     60     61      1      2      0      1
     61     18      3      1      0      0
     62      5      3      1      0      0
     63      2      3      1      0      1
     64     16      3      1      0      0
     65     59      3      1      1      1
     66     22      3      1      0      0
     67     24      1      1      0      1
     68     30      1      1      0      1
     69     46      1      1      0      1
     70     28      1      1      0      0
     71     27      1      1      0      1
     72     27      1      1      1      0
     73     28      1      1      0      1
     74     52      1      1      1      1
     75     11      3      1      0      1
     76      6      2      1      0      1
     77     46      3      1      0      0
     78     20      2      1      1      1
     79      3      1      1      0      1
     80     18      2      1      0      0
     81     25      2      1      0      0
     82      6      3      1      0      1
     83     65      3      1      1      1
     84     51      3      1      0      1
     85     39      2      1      0      1
     86      8      1      1      0      1
     87      8      2      1      0      0
     88     14      3      1      0      0
     89      6      3      1      0      0
     90      6      3      1      0      1
     91      7      3      1      0      0
     92      4      3      1      0      0
     93      8      3      1      0      0
     94      9      2      1      0      0
     95     32      3      1      1      0
     96     19      3      1      0      0
     97     11      3      1      0      0
     98     35      3      1      0      0
     99     16      1      1      0      0
    100      1      1      1      0      1
    101      6      1      1      0      1
    102     27      1      1      0      1
    103     25      1      1      0      1
    104     18      1      1      0      0
    105     37      3      1      0      0
    106     33      3      1      1      0
    107     27      2      1      0      0
    108      2      1      1      0      0
    109      8      2      1      0      0
    110      5      1      1      0      0
    111      1      1      1      0      1
    112     32      1      1      0      0
    113     25      1      1      1      1
    114     15      1      2      0      0
    115     15      1      2      0      1
    116     26      1      2      0      1
    117     42      1      2      1      1
    118      7      1      2      0      1
    119      2      1      2      0      0
    120     65      1      2      1      1
    121     33      2      2      0      1
    122      8      2      2      1      0
    123     30      2      2      0      0
    124      5      3      2      0      0
    125     15      3      2      0      0
    126     60      3      2      1      1
    127     13      3      2      1      1
    128     70      3      1      0      1
    129      5      3      1      0      0
    130      3      3      1      0      1
    131     50      2      1      0      1
    132      6      2      1      0      0
    133     12      2      1      0      1
    134     39      3      2      1      0
    135     15      2      2      0      1
    136     35      2      2      1      0
    137      2      2      2      0      1
    138     17      3      2      0      0
    139     43      3      2      1      1
    140     30      2      2      0      1
    141     11      1      2      0      1
    142     39      1      2      1      1
    143     32      1      2      0      1
    144     17      1      2      0      1
    145      3      3      2      0      1
    146      7      3      2      0      0
    147      2      2      2      0      0
    148     64      2      2      1      1
    149     13      1      2      1      1
    150     15      2      2      1      1
    151     48      2      2      0      1
    152     23      1      2      0      1
    153     48      1      2      1      0
    154     25      1      2      0      1
    155     12      1      2      0      1
    156     46      1      2      1      1
    157     79      1      2      0      1
    158     56      1      2      0      1
    159      8      1      2      0      1
    160     29      3      1      1      0
    161     35      3      1      1      0
    162     11      3      1      1      0
    163     69      3      1      0      1
    164     21      3      1      1      0
    165     13      3      1      0      0
    166     21      1      1      0      1
    167     32      1      1      1      1
    168     24      1      1      1      0
    169     24      1      1      0      1
    170     73      1      1      0      1
    171     42      1      1      0      1
    172     34      1      1      1      1
    173     30      2      1      0      0
    174      7      2      1      0      0
    175     29      3      1      1      0
    176     22      3      1      1      0
    177     38      2      1      0      1
    178     13      2      1      0      1
    179     12      2      1      0      1
    180     42      3      1      0      0
    181     17      3      1      1      0
    182     21      3      1      0      1
    183     34      1      1      0      1
    184      1      3      1      0      0
    185     14      2      1      0      0
    186     16      2      1      0      0
    187      9      3      1      0      0
    188     53      3      1      0      0
    189     27      3      1      0      0
    190     15      3      1      0      0
    191      9      3      1      0      0
    192      4      2      1      0      1
    193     10      3      1      0      1
    194     31      3      1      0      0
    195     85      3      1      0      1
    196     24      2      1      0      0
	;;;;
	run; quit;

proc genmod data=disease descending;
   class SES SECT SAVINGS ;
   model Y = AGE SES SECT SAVINGS /dist=binomial link=logit;
   estimate 'Age estimate for 5 years' Age 5 / exp;
   estimate 'Age estimate for 1 year' Age 1 / exp;
run;


proc genmod data=disease descending;
   class SES SECT SAVINGS ;
   model Y = AGE SES SECT SAVINGS SES*AGE/dist=binomial link=logit;
   estimate 'Age effect for SES 1' Age 5 SES*AGE 5 0 0 / exp;
   estimate 'Age effect for SES 2' Age 5 SES*AGE 0 5 0 / exp;
   estimate 'Age effect for SES 3' Age 5 SES*AGE 0 0 5 / exp;
run;


proc genmod data=disease descending;
   class SES SECT SAVINGS ;
   model Y = AGE SES SECT SAVINGS SES*AGE/dist=binomial link=logit;
     estimate 'Age effect for SES 1' Age 1 SES*AGE 1 0 0 / exp;
   estimate 'Age effect for SES 2' Age 1 SES*AGE 0 1 0 / exp;
   estimate 'Age effect for SES 3' Age 1 SES*AGE 0 0 1 / exp;
run;



data Children;
input  cell dur $   res $ educ $ avg   var    n;
cards;
1    0-4  Suva  none 0.50  1.14   8
2    0-4  Suva lower 1.14  0.73  21
3    0-4  Suva upper 0.90  0.67  42
4    0-4  Suva  sec+ 0.73  0.48  51
5    0-4 urban  none 1.17  1.06  12
6    0-4 urban lower 0.85  1.59  27
7    0-4 urban upper 1.05  0.73  39
8    0-4 urban  sec+ 0.69  0.54  51
9    0-4 rural  none 0.97  0.88  62
10   0-4 rural lower 0.96  0.81 102
11   0-4 rural upper 0.97  0.80 107
12   0-4 rural  sec+ 0.74  0.59  47
13   5-9  Suva  none 3.10  1.66  10
14   5-9  Suva lower 2.67  0.99  30
15   5-9  Suva upper 2.04  1.87  24
16   5-9  Suva  sec+ 1.73  0.68  22
17   5-9 urban  none 4.54  3.44  13
18   5-9 urban lower 2.65  1.51  37
19   5-9 urban upper 2.68  0.97  44
20   5-9 urban  sec+ 2.29  0.81  21
21   5-9 rural  none 2.44  1.93  70
22   5-9 rural lower 2.71  1.36 117
23   5-9 rural upper 2.47  1.30  81
24   5-9 rural  sec+ 2.24  1.19  21
25 10-14  Suva  none 4.08  1.72  12
26 10-14  Suva lower 3.67  2.31  27
27 10-14  Suva upper 2.90  1.57  20
28 10-14  Suva  sec+ 2.00  1.82  12
29 10-14 urban  none 4.17  2.97  18
30 10-14 urban lower 3.33  2.99  43
31 10-14 urban upper 3.62  1.96  29
32 10-14 urban  sec+ 3.33  1.52  15
33 10-14 rural  none 4.14  3.52  88
34 10-14 rural lower 4.14  3.31 132
35 10-14 rural upper 3.94  3.28  50
36 10-14 rural  sec+ 3.33  2.50   9
37 15-19  Suva  none 4.21  2.03  14
38 15-19  Suva lower 4.94  1.46  31
39 15-19  Suva upper 3.15  0.81  13
40 15-19  Suva  sec+ 2.75  0.92   4
41 15-19 urban  none 4.70  7.40  23
42 15-19 urban lower 5.36  2.97  42
43 15-19 urban upper 4.60  3.83  20
44 15-19 urban  sec+ 3.80  0.70   5
45 15-19 rural  none 5.06  4.91 114
46 15-19 rural lower 5.59  3.23  86
47 15-19 rural upper 4.50  3.29  30
48 15-19 rural  sec+ 2.00  0.00   1
49 20-24  Suva  none 5.62  4.15  21
50 20-24  Suva lower 5.06  4.64  18
51 20-24  Suva upper 3.92  4.08  12
52 20-24  Suva  sec+ 2.60  4.30   5
53 20-24 urban  none 5.36  7.19  22
54 20-24 urban lower 5.88  4.44  25
55 20-24 urban upper 5.00  4.33  13
56 20-24 urban  sec+ 5.33  0.33   3
57 20-24 rural  none 6.46  8.20 117
58 20-24 rural lower 6.34  5.72  68
59 20-24 rural upper 5.74  5.20  23
60 20-24 rural  sec+ 2.50  0.50   2
61 25-29  Suva  none 6.60 12.40  47
62 25-29  Suva lower 6.74 11.66  27
63 25-29  Suva upper 5.38  4.27   8
64 25-29  Suva  sec+ 2.00  0.00   1
65 25-29 urban  none 6.52 11.45  46
66 25-29 urban lower 7.51 10.53  45
67 25-29 urban upper 7.54 12.60  13
68 25-29 rural  none 7.48 11.34 195
69 25-29 rural lower 7.81  7.57  59
70 25-29 rural upper 5.80  7.07  10
;;;;
run; quit;

data children; set children;
Y = avg*n;
logn = log(n);
run;
proc genmod data=children;
  class dur res educ;
  model Y = dur res educ / dist=poisson link=log offset = logn;
  estimate  'logrr(res=rural v suva)' res -1 1 0 /exp;
  estimate  'logrr(res=rural v urban)' res 0 1 -1 /exp;
  estimate  'logrr(res=urban v suva)' res -1 0 1 /exp;
run; 
